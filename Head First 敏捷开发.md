# Head First 敏捷开发

### 什么是敏捷？

**到底什么是敏捷？**

敏捷是为了帮助解决软件团队遇到的特定问题而专门优化的一组方法和方法论，而且力求简单，以保证实现相对容易。

每个方法和方法论都包括一些改良和优化的实践，以便尽可能容易地采用这些方法。

敏捷也是一种思维模式。敏捷思想关注的是帮助人们相互分享信息，便于它们做出重要的项目决策（而不只是依赖老板或者项目经理做决策）。

敏捷的目的是让整个团队都参与计划、设计和流程改进。

每个敏捷方法论有自己的一组价值观，团队成员可以利用这些价值观作为指南。

**Scrum 是最常用的敏捷方法**

一个 Scrum 项目中有 3 个主要角色：产品负责人（Product Owner）与团队一起维护产品待办列表（Product Backlog）；敏捷教练或敏捷专家（Scrum Master）负责指导团队克服障碍；另外还有开发团队（Development Team）成员（团队中的每一个人）。项目划分为 sprint，这是遵循 Scrum 模式的迭代周期，sprint 长度相同（通常为 2 周或 30 天）。一个 sprint 开始时，团队要召开 sprint 计划会议来确定这个 sprint 中要实现产品待办列表中的哪些特性。这称为 sprint 待办列表（Sprint Backlog），团队会在这个 sprint 中构建 sprint 待办列表中的所有特性。每天团队会开一个短会，这称为每日 Scrum 站会（Daily Scrum）。sprint 结束时，会在 sprint 评审会议（Sprint Review）上向产品负责人和利益相关者演示可用的软件，团队还会召开一个回顾会议来总结学到的经验教训。

**Scrum、XP 和精益/看板强调完全不同的领域**

Scrum 主要强调项目管理：正在完成什么工作，另外确保目前做的工作与用户和利益相关者的需求是一致的。XP 主要强调软件开发：构建设计合理、易于维护的高质量代码。精益/看板是精益思维模式与看板方法的组合，团队用它来强调持续改进构建软件的方式。

### 敏捷价值观和原则

**敏捷宣言**

个体与交互胜于流程和工具

可用的软件胜于完备的文档

客户协作胜于合同谈判

响应变化胜于遵循计划

在每组比对中，后者并非全无价值，但我们更看重前者。

敏捷宣言的 4 个价值观可以引导团队建立更好、更有效的思维模式。

**个体与交互胜于流程和工具**

流程和工具对于完成项目很重要，它们确实很有意义。不过，团队中的个人更重要，不论你引入什么工具，都应当能够改进团队中个人相互之间以及团队和利益相关者之间的交互。

**可用的软件胜于完备的文档**

文档的问题在于，两个人读同样的文字，却可能有两种完全不同的理解和解释。

用户要衡量一个软件是否能很好地工作，最有效地办法就是具体使用这个软件。

有时文档可能很有用。比如，如果不太清楚“可用的”软件要做什么，这种时候就需要文档。

**客户协作胜于合同谈判**

如果一个团队里的人员有一种“合同谈判”的思维模式，它们往往会认为必须对团队要构建什么或者要做什么达成严格的协定，之后所有工作才能开始。

他们认识到项目会变化，而且人们在启动一个项目时绝对不可能得到全部信息。所以，他们并不是在项目开始之前努力地想要完全确定具体做什么，而是会与客户协作来得到最好的结果。

**响应变化胜于遵循计划**

传统的瀑布项目有一些处理变更的方法，不过这些方法往往需要严格而且很耗费时间的变更控制流程。这也反映了一种思维模式，认为变更是例外情况，而不是一般规律。

计划的问题在于，计划是在项目之初制定的，而那时团队对于他们将要构建的产品知之甚少。所以敏捷团队认为他们的计划很可能会改变。

**敏捷原则帮助你交付产品**

我们的最高目标是，通过尽早和持续地交付有价值的软件来满足客户。

欢迎对需求提出变更，即使是在项目开发后期。敏捷流程要善于利用需求变更，帮助客户获得竞争优势。

要不断交付可用的软件，周期从几周到几个月不等，且越短越好。

可用的软件是衡量进度的主要指标。

**敏捷原则可以帮助团队沟通和合作**

项目过程中，业务人员与开发人员必须在一起工作。

要善于激励项目人员，给他们所需要的环境和支持，并相信他们能够完成任务。

无论是开发团队内还是团队间，最有效的沟通方法是面对面交谈。

### 用 Scrum 管理项目

**Scrum 事件帮助你完成项目**

每个 Scrum 项目都组织为时间盒迭代，这些迭代称为 **Sprint**。很多团队使用时长 30 天的 Sprint，不过 2 周的 Sprint 也很常见。

每个 Sprint 开始时，Scrum 团队会召集起来召开一个 **Sprint 计划会议**，在计划会议上，他们要选择这个 Sprint 包含哪些待办项。

每天团队会召开一个**每日 Scrum 站会**，这是一个简短的会议，每个人会报告他们的进展更新情况、接下来的工作，以及他们遇到的障碍。

Sprint 结束时，团队会召开一个 **Sprint 评审会议**，在这个评审会议上，他们会与用户会面，并向用户演示他们构建的可用的软件。

团队在一个 Sprint 中完成的最后一件事是召开一个 **Sprint 回顾会议**，在回顾会议上，他们会讨论这个 Sprint 中发生了什么，从而能找出并重现做得好的方面，并从问题中得到教训。

**Scrum 角色帮助你了解谁做什么**

开发团队中的人员可能有不同领域的专业技能，甚至在公司有不同的职位，不过他们都以同样的方式参与 Scrum 事件。

产品负责人帮助团队理解用户的需要，使团队能构建最有价值的产品。

Scrum 敏捷教练帮助团队理解和执行 Scrum。

**Scrum 工件保证团队掌握信息**

团队使用**产品待办列表**来跟踪他们为整个项目开发的特性。产品待办列表中的每一项有 4 个属性：次序、描述、估算和价值。

Sprint 的待办项来源于产品待办列表，并增加到 **Sprint 待办列表**。在这个 Sprint 期间，所有开发工作都以完成 Sprint 待办列表项为中心。

**增量**是这个 Sprint 结束时实际完成和交付的所有产品待办列表项的总和。

很多团队会为重要的 bug 修正、性能改进（或者其他非功能性需求）、处理风险或者其他工作增加待办列表项。

**Scrum Sprint 详解**

Sprint 计划会议划分为两个部分，每个部分的时间盒限定为整个会议时长的一半：

在前半部分，团队要得出这个 Sprint 可以做什么。首先，团队会写出 Sprint 目标，这可能是一两句话，指出他们在这个 Sprint 中要完成的工作。然后一起从产品待办列表中选择待办项来创建 Sprint 待办列表，Sprint 待办列表包含这个 Sprint 期间要完成的所有特性。

在后半部分，团队要确定如何完成这个工作。他们将 Sprint 待办列表中的每一项分解为可以用一天或更短时间完成的任务，通过这种方式来创建这个 Sprint 的计划。

**Scrum 价值观使团队更有效**

*开放*

你总是知道你的团队成员在做什么，而且你也很乐意他们知道你在做什么。如果你遇到一个问题或者障碍，你会向团队请教。

*尊重*

你和你的团队伙伴互相尊重，团队中的每个人都信任彼此能完成任务。

*勇气*

Scrum 团队有勇气接受挑战。团队中的个人有勇气为他们的项目挺身而出。

*专注*

每个团队成员都专注于 Sprint 目标，他们在这个 Sprint 中做的一切工作都是在朝着这个目标前进。在 Sprint 中，每个人只完成 Sprint 任务，而且一次只完成一个任务，直到 Sprint 结束。

*承诺*

团队中的每个人都承诺会尽其所能交付最有价值的产品，公司的其他人员也同样做出承诺。

集体承诺表示每个团队成员承诺交付完整的增量，而不只是他们自己正在完成的任务。

要让团队有权确定每个 Sprint 期间要开发哪些特性，并信任团队能尽其所能地交付最有价值的软件。

**任务被描述为“完成”之前不算完成**

Scrum 团队对于增加到待办列表中的每一项或特性都有一个“完成”的定义。

**Scrum 团队要在整个 Sprint 中适应变更**

“透明”就是指每一个人都理解他们在 Sprint 中要构建的所有特性，而且他们正在做哪些工作、接下来计划做哪些工作以及他们遇到了哪些问题都会对团队公开。“检查”是指他们会使用 Scrum 事件（尤其是每日 Scrum 站会）经常检查，确保他们的知识是最新的。“适应”则表示他们要不断寻求方法，根据这些新信息调整下一步计划要做的工作。

并不是提前计划好一切，他们会在最后责任时刻才做出决定。这意味着，他们只需要做绝对必要的计划使得这个 Sprint 得以开始就可以了。

经验过程控制理论（empirical process control theory）

**敏捷宣言帮你“掌握” Scrum**

| 敏捷宣言                                                     | Scrum                                                        |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 我们的最高目标是，通过尽早和持续地交付有价值的软件来满足客户。 | Sprint 评审会议                                              |
| 最佳的架构、需求和设计出自于自组织的团队。                   | Scrum 团队是自组织的：他们会作为一个团队来确定如何达成他们的目标，并确定谁来做这些工作。 |
| 欢迎对需求提出变更，即使是在项目开发后期。敏捷流程要善于利用需求变更，帮助客户获得竞争优势。 | 最后责任时刻                                                 |

### 通用 Scrum 实践

**Generally Accepted Scrum Practices**

*用户故事和故事点*

用户故事可以帮助你掌握用户对软件的需求，从而能按“块”（可供用户使用）构建软件。故事点用来描述构建一个用户故事需要的工作量。

*规划扑克*

团队使用规划扑克让所有人考虑每个故事的规模，以及如何构建这些故事。

*任务板*

任务板可以保证团队中的所有人对于当前 Sprint 的进度所掌握的信息是一致的。

*燃尽图*

通过使用燃尽图，团队中的所有人都能看到他们已经完成了多少工作，另外还剩下多少工作要做。

**用户故事帮助团队了解用户需要什么**

用户故事用简短的几句话描述用户将如何使用这个软件。

作为一个<用户类型>，我希望<要采取的行动>，这样就能得到<我希望发生的结果>。

用户故事与传统的软件需求之间最大的区别是，用户故事不会明确描述特性的具体细节。

有时一旦团队与用户确认了故事，还需要编写更多文档。有时只是交谈就足够了，团队无需更多文档就能构建这个特性。

承诺驱动规划 / 速度驱动规划

**故事点使团队强调每个故事的相对规模**

并不是试图准确预测构建一个特性需要多长时间，团队会根据这个特性相对于他们之前构建的其他特性的规模，来为每个故事指定一个分值。

一个 Sprint 中没有完成的工作会从这个 Sprint 移至下一个 Sprint，每个 Sprint 中完成的故事点总数会记为这个项目的速度。

一段时间后，团队就能越来越熟练地指定故事点，而且每个 Sprint 中交付的故事点数也会越来越一致。

可以用速度帮助你的团队根据过往的表现来确定应该承诺多少工作。

在一个敏捷项目中，并不是预测每个特性的交付日期，团队所关注的是每个 Sprint 中尽可能交付最高价值的工作，并保持一个可持续的工作速度。

团队第一次使用故事点时，首先他们通常要做的就是聚在一起决定哪种类型的工作可以指定 1 个故事点，这往往是团队中所有人都能理解的一个简单任务。

**用户故事有关于交付可测试的软件**

有些团队会在用户故事卡片的背面写上确认各个用户故事的测试。这会帮助团队在完成一个故事时记住这个故事要如何工作。这也有助于用户和团队一致认可软件完成时这个故事有怎样的行为。这些测试也可以叫做满意条件和验收准则。

**整个团队一起估计**

准备 / 理解每个故事 / 指定一个故事点值 / 解释最大值和最小值 / 调整估计 / 汇聚估计

规划扑克的重点是让整个团队都参与项目的规划，并跟踪项目的进展。规划扑克就是要让团队讨论他们的估计，并协商正确的开发方法。由于估计和方法对团队透明，团队成员可以相互帮忙避免犯错误，并一起考虑开发每个特性的最高效的方法。

**任务板帮助团队了解信息**

还有很多团队还会在白板上加上任务卡片，也就是为分解故事得到的任务增加相应的卡片或便利贴，并把这些任务卡片归组到各个故事卡片下面。

**我们怎么知道要构建什么**

很多团队会在每个 Sprint 快要结束时安排一个时间，在开始计划下一个 Sprint 之前首先确保待办列表中的项已经明确了先后顺序。这个会议称为产品待办列表细化会议。

他们利用这个时间提出需要在计划会议之前回答的问题，并反复检查用户故事的优先顺序。

**故事地图帮助你确定待办列表的优先顺序**

**用户画像帮助你了解用户**

**回顾可以帮助团队改进他们的工作方式**

做准备 / 收集数据 / 产生见解 / 决定做什么

他们会检查进度时间表，讨论已经完成的工作，以及之前做出的决策。通常会让团队成员对这些事件和决策投票，来确定在这个 Sprint 中对他们来说这些事件和决策是好还是坏。

*帮助准备的工具：*

签到是在回顾会议开始时让团队参与的一种方法。

ESVP 技术要求团队的各个成员把自己归入以下 4 类中的某一类：Explorer（探索者），Shopper（采购者），Vacationer（度假者）或 Prisoner（囚徒）。

*帮助收集数据的工具：*

时间表方法是以时间先后顺序显示一个 Sprint 中发生的所有有意义的活动。

色码点用于指示团队成员对时间表上的所有事件是什么态度。

*帮助产生见解的工具：*

鱼骨图用来查找导致一个问题的原因。鱼骨图有助于集中地找出所有可能的原因，从而能考虑将来如何避免这个问题。

用点数确定优先级技术是指，每个团队成员会拿到 10 个点，可以贴到他们希望团队最先解决的问题上。

*帮助决定做什么的工具：*

小标题方法要把团队提出的所有见解归类到一个行动计划中。一组常用的小标题是停止 / 开始 / 继续。
